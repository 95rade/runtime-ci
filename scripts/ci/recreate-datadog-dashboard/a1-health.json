{
  "board_title": "a1 Health",
  "read_only": false,
  "board_bgtype": "board_graph",
  "created": "2016-03-28T17:39:52.806579+00:00",
  "modified": "2016-03-28T17:39:52.806591+00:00",
  "height": 109,
  "width": "100%",
  "template_variables": [
    {
      "default": "*",
      "prefix": null,
      "name": "scope"
    }
  ],
  "templated": false,
  "widgets": [
    {
      "title_size": 16,
      "title": true,
      "color": "#4d4d4d",
      "text": "Router Health",
      "title_align": "left",
      "text_align": "left",
      "title_text": "",
      "height": 2,
      "width": 66,
      "y": 0,
      "x": 0,
      "font_size": "36",
      "type": "free_text"
    },
    {
      "title_size": "16",
      "title": true,
      "title_align": "left",
      "title_text": "Rejected requests (blue) and Bad Gateway (purple) requests",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(avg:datadog.nozzle.gorouter.rejected_requests{deployment:cf-a1})"
          },
          {
            "q": "per_second(avg:datadog.nozzle.gorouter.bad_gateways{deployment:cf-a1})"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:a1 start_deploy"
          },
          {
            "q": "tags:deployment:a1 end_deploy"
          }
        ]
      },
      "width": 66,
      "timeframe": "4h",
      "y": 4,
      "x": 0,
      "type": "timeseries"
    },
    {
      "title_size": "16",
      "title": true,
      "title_align": "left",
      "title_text": "Requests to Router",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "per_second(sum:datadog.nozzle.gorouter.total_requests{deployment:cf-a1})"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:a1 start_deploy"
          },
          {
            "q": "tags:deployment:a1 end_deploy"
          }
        ]
      },
      "width": 66,
      "timeframe": "4h",
      "y": 27,
      "x": 0,
      "type": "timeseries"
    },
    {
      "title_size": 16,
      "title": true,
      "title_align": "left",
      "title_text": "Total Routes (24h)",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "sum:datadog.nozzle.gorouter.total_routes{deployment:cf-a1} by {job,index}",
            "stacked": false
          }
        ],
        "events": [
          {
            "q": "tags:deployment:a1 start_deploy"
          },
          {
            "q": "tags:deployment:a1 end_deploy"
          }
        ]
      },
      "width": 66,
      "timeframe": "1d",
      "y": 50,
      "x": 0,
      "legend_size": "0",
      "type": "timeseries",
      "legend": false
    },
    {
      "title_size": 16,
      "title": true,
      "color": "#4d4d4d",
      "text": "DEA Health",
      "title_align": "left",
      "text_align": "left",
      "title_text": "",
      "height": 2,
      "width": 66,
      "y": 0,
      "x": 66,
      "font_size": "36",
      "type": "free_text"
    },
    {
      "title_size": "16",
      "title": true,
      "title_align": "left",
      "title_text": "User CPU",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "bosh.healthmonitor.system.cpu.user{deployment:cf-a1,job:runner_z1} by {index}",
            "stacked": false
          },
          {
            "q": "bosh.healthmonitor.system.cpu.user{deployment:cf-a1,job:runner_z2} by {index}",
            "stacked": false
          }
        ],
        "events": [
          {
            "q": "tags:deployment:a1 start_deploy"
          },
          {
            "q": "tags:deployment:a1 end_deploy"
          }
        ]
      },
      "width": 66,
      "timeframe": "4h",
      "y": 27,
      "x": 66,
      "type": "timeseries"
    },
    {
      "title_size": 16,
      "title": true,
      "title_align": "left",
      "title_text": "System CPU",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "bosh.healthmonitor.system.cpu.sys{deployment:cf-a1,job:runner_z1} by {index}",
            "stacked": false
          },
          {
            "q": "bosh.healthmonitor.system.cpu.sys{deployment:cf-a1,job:runner_z2} by {index}",
            "stacked": false
          }
        ],
        "events": [
          {
            "q": "tags:deployment:a1 start_deploy"
          },
          {
            "q": "tags:deployment:a1 end_deploy"
          }
        ]
      },
      "width": 66,
      "timeframe": "4h",
      "y": 50,
      "x": 66,
      "legend_size": "0",
      "type": "timeseries",
      "legend": false
    },
    {
      "title_size": 16,
      "title": true,
      "color": "#4d4d4d",
      "text": "App Health",
      "title_align": "left",
      "text_align": "left",
      "title_text": "",
      "height": 2,
      "width": 66,
      "y": 0,
      "x": 132,
      "font_size": "36",
      "type": "free_text"
    },
    {
      "title_size": "16",
      "title": true,
      "title_align": "left",
      "title_text": "Job queue",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "datadog.nozzle.cc.failed_job_count.total{deployment:cf-a1}",
            "style": {
              "palette": "warm"
            }
          },
          {
            "q": "datadog.nozzle.cc.job_queue_length.total{deployment:cf-a1}",
            "style": {
              "width": "thick",
              "palette": "cool"
            }
          }
        ],
        "events": [
          {
            "q": "tags:deployment:a1 start_deploy"
          },
          {
            "q": "tags:deployment:a1 end_deploy"
          }
        ]
      },
      "width": 66,
      "timeframe": "1w",
      "y": 73,
      "x": 198,
      "type": "timeseries"
    },
    {
      "title_size": 16,
      "title": true,
      "aggregator": "max",
      "conditional_formats": [],
      "title_align": "left",
      "text_align": "left",
      "title_text": "Number of Routes",
      "precision": "*",
      "width": 28,
      "metric_type": "standard",
      "calc_func": "raw",
      "x": 198,
      "y": 4,
      "query": "avg:datadog.nozzle.gorouter.total_routes{deployment:cf-a1}",
      "text_size": "auto",
      "height": 7,
      "type": "query_value",
      "timeframe": "5m",
      "unit": "",
      "aggr": "avg"
    },
    {
      "metric": "datadog.nozzle.cc.total_users",
      "height": 12,
      "query": "avg:datadog.nozzle.cc.total_users{deployment:cf-a1}",
      "text_size": "auto",
      "unit": "",
      "title_size": 16,
      "title": true,
      "aggregator": "max",
      "title_align": "left",
      "text_align": "left",
      "width": 28,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:cf-a1"
      ],
      "precision": "*",
      "title_text": "Number of Users",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [],
      "aggr": "avg",
      "y": 13,
      "x": 198
    },
    {
      "sizing": "zoom",
      "title_size": 16,
      "title": true,
      "url": "http://imgur.com/lbTp5NF.jpg",
      "title_align": "left",
      "title_text": "",
      "height": 28,
      "width": 28,
      "y": 13,
      "x": 226,
      "type": "image"
    },
    {
      "metric": "bosh.healthmonitor.system.healthy",
      "height": 9,
      "query": "avg:bosh.healthmonitor.system.healthy{deployment:vpc-bosh-a1,job:bosh}",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:vpc-bosh-a1",
        "job:bosh"
      ],
      "precision": 1,
      "title_text": "BOSH",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 40,
      "x": 198
    },
    {
      "metric": "",
      "height": 9,
      "query": "((avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:uaa_z1}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:uaa_z2}.rollup(avg,60))) * 0.5",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [],
      "precision": 1,
      "title_text": "UAA",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 40,
      "x": 212
    },
    {
      "metric": "bosh.healthmonitor.system.healthy",
      "height": 9,
      "query": "((avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:api_z1}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:api_z2}.rollup(avg,60))) * 0.5",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:cf-a1",
        "job:api_z1",
        "job:api_z2"
      ],
      "precision": 1,
      "title_text": "API",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 40,
      "x": 226
    },
    {
      "metric": "bosh.healthmonitor.system.healthy",
      "height": 9,
      "query": "((avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:router_z1}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:router_z2}.rollup(avg,60))) * 0.5",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:cf-a1",
        "job:router_z1",
        "job:router_z2"
      ],
      "precision": 1,
      "title_text": "Router",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 62,
      "x": 198
    },
    {
      "title_size": 16,
      "title": true,
      "title_align": "left",
      "title_text": "App request roundtrip (ns) (Week)",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:app_benchmarking.rest_of_time{deployment:cf-a1} by {status}, avg:app_benchmarking.time_in_gorouter{deployment:cf-a1} by {status}, avg:app_benchmarking.time_in_app{deployment:cf-a1} by {status}",
            "type": "bars"
          },
          {
            "q": "ewma_20(avg:app_benchmarking.total_roundtrip{deployment:cf-a1} by {status})",
            "style": {
              "palette": "warm"
            },
            "type": "line"
          }
        ],
        "outliers": "1%",
        "events": [
          {
            "q": "tags:deployment:a1 start_deploy"
          },
          {
            "q": "tags:deployment:a1 end_deploy"
          }
        ]
      },
      "width": 66,
      "timeframe": "1w",
      "y": 73,
      "x": 0,
      "legend_size": "0",
      "type": "timeseries",
      "legend": false
    },
    {
      "metric": "bosh.healthmonitor.system.healthy",
      "height": 9,
      "query": "((avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:api_worker_z1}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:api_worker_z2}.rollup(avg,60))) * 0.5",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:cf-a1",
        "job:api_worker_z1",
        "job:api_worker_z2"
      ],
      "precision": 1,
      "title_text": "API Worker",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 40,
      "x": 240
    },
    {
      "metric": "bosh.healthmonitor.system.healthy",
      "height": 9,
      "query": "avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:clock_global}",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:cf-a1",
        "job:clock_global"
      ],
      "precision": 1,
      "title_text": "API Clock",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 51,
      "x": 198
    },
    {
      "metric": "bosh.healthmonitor.system.healthy",
      "height": 9,
      "query": "((avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:nats_z1}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:nats_z2}.rollup(avg,60))) * 0.5",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:cf-a1",
        "job:nats_z1",
        "job:nats_z2"
      ],
      "precision": 1,
      "title_text": "NATS",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 51,
      "x": 212
    },
    {
      "title_size": "16",
      "title": true,
      "aggregator": "min",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "title_align": "center",
      "text_align": "center",
      "title_text": "Stats",
      "precision": 1,
      "width": 14,
      "metric_type": "standard",
      "calc_func": "raw",
      "x": 226,
      "y": 51,
      "query": "avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:stats_z1}",
      "text_size": "auto",
      "height": 9,
      "type": "query_value",
      "timeframe": "5m",
      "unit": "auto",
      "aggr": "avg"
    },
    {
      "metric": "bosh.healthmonitor.system.healthy",
      "height": 9,
      "query": "((avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:hm9000_z1}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:hm9000_z2}.rollup(avg,60))) * 0.5",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:cf-a1",
        "job:hm9000_z1",
        "job:hm9000_z2"
      ],
      "precision": 1,
      "title_text": "HM9000",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 62,
      "x": 212
    },
    {
      "metric": "",
      "height": 9,
      "query": "(  (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:doppler_z1}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:loggregator_trafficcontroller_z1}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:doppler_z2}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:loggregator_trafficcontroller_z2}.rollup(avg,60))  ) * 0.25",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:cf-a1",
        "job:doppler_z1",
        "job:doppler_z2",
        "job:loggregator_trafficcontroller_z1",
        "job:loggregator_trafficcontroller_z2"
      ],
      "precision": 1,
      "title_text": "Loggregator",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 51,
      "x": 240
    },
    {
      "metric": "bosh.healthmonitor.system.healthy",
      "height": 9,
      "query": "((avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:etcd_z1}.rollup(avg,60)) + (avg:bosh.healthmonitor.system.healthy{deployment:cf-a1,job:etcd_z2}.rollup(avg,60))) * 0.5",
      "text_size": "auto",
      "unit": "auto",
      "title_size": 16,
      "title": true,
      "aggregator": "min",
      "title_align": "center",
      "text_align": "center",
      "width": 14,
      "timeframe": "5m",
      "type": "query_value",
      "tags": [
        "deployment:cf-a1",
        "job:etcd_z1",
        "job:etcd_z2"
      ],
      "precision": 1,
      "title_text": "ETCD",
      "calc_func": "raw",
      "metric_type": "standard",
      "conditional_formats": [
        {
          "color": "white_on_red",
          "invert": false,
          "comparator": "<",
          "value": 1
        },
        {
          "color": "white_on_green",
          "invert": false,
          "comparator": ">=",
          "value": 1
        }
      ],
      "aggr": "avg",
      "y": 62,
      "x": 226
    },
    {
      "title_size": 16,
      "title": true,
      "color": "#4d4d4d",
      "text": "System Health",
      "title_align": "left",
      "text_align": "left",
      "title_text": "",
      "height": 2,
      "width": 66,
      "y": 0,
      "x": 198,
      "font_size": "36",
      "type": "free_text"
    },
    {
      "title_size": "16",
      "title": true,
      "title_align": "left",
      "title_text": "DIEGO Cell: LRPs",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "avg:datadog.nozzle.bbs.LRPsDesired{deployment:cf-a1-diego}"
          },
          {
            "q": "avg:datadog.nozzle.bbs.LRPsStarting{deployment:cf-a1-diego}"
          },
          {
            "q": "avg:datadog.nozzle.bbs.LRPsRunning{deployment:cf-a1-diego}"
          },
          {
            "q": "avg:datadog.nozzle.bbs.CrashedActualLRPs{deployment:cf-a1-diego}"
          },
          {
            "q": "avg:datadog.nozzle.bbs.CrashedActualLRPs{deployment:cf-a1-diego} + avg:datadog.nozzle.bbs.LRPsStarting{deployment:cf-a1-diego} + avg:datadog.nozzle.bbs.LRPsRunning{deployment:cf-a1-diego}"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:cf-a1-diego started deploying diego to a1"
          }
        ]
      },
      "width": 66,
      "timeframe": "4h",
      "y": 98,
      "x": 132,
      "type": "timeseries"
    },
    {
      "title_size": "16",
      "title": true,
      "title_align": "left",
      "title_text": "DIEGO Cell: Missing LRPs",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "( ( ( avg:datadog.nozzle.bbs.LRPsDesired{deployment:cf-a1-diego} - avg:datadog.nozzle.bbs.LRPsRunning{deployment:cf-a1-diego} ) - avg:datadog.nozzle.bbs.LRPsStarting{deployment:cf-a1-diego} ) - avg:datadog.nozzle.bbs.CrashedActualLRPs{deployment:cf-a1-diego} )",
            "type": "line"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:cf-a1-diego started deploying diego to a1"
          }
        ]
      },
      "width": 66,
      "timeframe": "4h",
      "y": 98,
      "x": 198,
      "type": "timeseries"
    },
    {
      "title_size": "16",
      "title": true,
      "title_align": "left",
      "title_text": "DIEGO N*Sync: Bulker Duration (seconds)",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "max:datadog.nozzle.nsync_bulker.DesiredLRPSyncDuration{deployment:cf-a1-diego} / 1000000000",
            "type": "line"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:cf-a1-diego started deploying diego to a1"
          }
        ]
      },
      "width": 66,
      "timeframe": "4h",
      "y": 98,
      "x": 0,
      "type": "timeseries"
    },
    {
      "title_size": "16",
      "title": true,
      "title_align": "left",
      "title_text": "DIEGO Cell: Available Memory",
      "height": 21,
      "tile_def": {
        "viz": "timeseries",
        "requests": [
          {
            "q": "(min:datadog.nozzle.rep.CapacityRemainingMemory{deployment:cf-a1-diego}by{ip})/0.000001024",
            "type": "bars"
          }
        ],
        "events": [
          {
            "q": "tags:deployment:cf-a1-diego started deploying diego to a1"
          }
        ]
      },
      "width": 66,
      "timeframe": "4h",
      "y": 98,
      "x": 66,
      "type": "timeseries"
    }
  ],
  "id": 71674
}
