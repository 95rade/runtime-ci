groups:
- name: mkman
  jobs:
  - test-mkman

resources:
- name: runtime-ci
  type: git
  source:
    branch: master
    uri: https://github.com/cloudfoundry/runtime-ci.git
- name: mkman-develop
  type: git
  source:
    branch: develop
    uri: https://github.com/cloudfoundry/mkman.git
- name: cf-release
  type: git
  source:
    branch: develop
    uri: https://github.com/cloudfoundry/cf-release.git
- name: spiff
  type: github-release
  source:
    repository: spiff
    user: cloudfoundry-incubator

jobs:
- name: test-mkman
  public: true
  plan:
  - aggregate:
    - get: runtime-ci
    - get: cf-release
    - get: spiff
      params:
        globs: ["spiff_linux_amd64"]
    - get: mkman
      resource: mkman-develop
      trigger: true
  - task: run-tests
    file: runtime-ci/scripts/ci/mkman-tests/task.yml
